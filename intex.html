<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Interactive Map: English-speaking Countries</title>
  <style>
    :root{
      --bg:#0f172a;
      --panel:#111827;
      --panel-2:#1f2937;
      --muted:#94a3b8;
      --text:#e5e7eb;
      --accent:#22c55e;
      --accent-2:#3b82f6;
      --warn:#ef4444;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    html,body{height:100%;margin:0;}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial;background:linear-gradient(180deg,#0b1222,#0f172a 40%);color:var(--text);display:flex;flex-direction:column;gap:16px;}
    header{padding:16px 20px 0;}
    h1{margin:0 0 6px;font-size:clamp(18px,2.2vw,28px);font-weight:800;}
    .sub{color:var(--muted);font-size:clamp(12px,1.6vw,14px)}
    .app{display:grid;grid-template-columns:1.15fr 0.85fr;gap:16px;padding:0 20px 20px;}
    @media (max-width:980px){.app{grid-template-columns:1fr;}}
    .map-wrap{position:relative;background:var(--panel);border-radius:18px;box-shadow:var(--shadow);overflow:hidden;}
    .map-toolbar{position:absolute;inset:auto 12px 12px auto;display:flex;gap:8px;z-index:5}
    .btn{cursor:pointer;background:var(--panel-2);color:var(--text);border:1px solid #263246;padding:8px 10px;border-radius:10px;font-weight:600}
    .btn:hover{filter:brightness(1.15)}
    .world{display:block;width:100%;height:auto;user-select:none;pointer-events:none;opacity:.95}
    .dropzone{position:absolute;width:4.8%;height:6.4%;border:2px dashed transparent;border-radius:10px;transform:translate(-50%,-50%);transition:.2s all;}
    .dropzone.hint{border-color:#2d3b53;background:rgba(37,99,235,.08)}
    .dropzone.correct{border-color:var(--accent);background:rgba(34,197,94,.12)}
    .sidebar{display:flex;flex-direction:column;gap:12px}
    .panel{background:var(--panel);border:1px solid #243044;border-radius:18px;box-shadow:var(--shadow);}
    .panel h2{margin:16px 16px 8px;font-size:18px}
    .bank{display:flex;flex-wrap:wrap;gap:10px;padding:12px 16px 18px}
    .card{user-select:none;cursor:grab;padding:10px 12px;border-radius:12px;background:linear-gradient(180deg,#111827,#0b1222);border:1px solid #2a364a;box-shadow:0 4px 12px rgba(0,0,0,.25);font-weight:700;letter-spacing:.2px}
    .card:active{cursor:grabbing}
    .card.lock{opacity:.85;cursor:default}
    .card .flag{margin-right:8px}
    .row{display:flex;gap:12px;align-items:center;padding:12px 16px}
    .score{font-weight:800}
    .legend{display:flex;gap:8px;align-items:center;color:var(--muted);font-size:12px}
    .dot{width:10px;height:10px;border-radius:50%}
    .trash-zone{margin:0 16px 16px;border:2px dashed #374458;border-radius:14px;color:#cbd5e1;text-align:center;padding:12px;opacity:.9}
    .trash-zone.ok{background:rgba(59,130,246,.08);border-color:#4b83ff}
    .toast{position:fixed;left:50%;transform:translateX(-50%);bottom:16px;background:#0b1222;border:1px solid #233047;color:#e2e8f0;padding:10px 14px;border-radius:12px;box-shadow:var(--shadow);opacity:0;pointer-events:none;transition:.25s}
    .toast.show{opacity:1}
    .confetti{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;overflow:hidden;z-index:9999}
    .confetti div{position:absolute;width:10px;height:10px;opacity:0.8;animation:fall 2.5s linear forwards}
    @keyframes fall{to{transform:translateY(100vh) rotate(720deg);opacity:0;}}
  </style>
</head>
<body>
  <header>
    <h1>English-speaking Countries: drag the labels onto the map</h1>
    <div class="sub">Read the country name, decide if it is English-speaking, then drag it: onto the map (if <b>yes</b>) or to the ‚ÄúNon-English‚Äù box (if <b>no</b>).</div>
  </header>
  <main class="app">
    <section class="map-wrap" id="map">
      <div class="map-toolbar">
        <button class="btn" id="hintBtn" aria-pressed="false">Show hints</button>
        <button class="btn" id="resetBtn">Reset</button>
      </div>
      <img class="world" src="map.png" alt="World map" />
      <div class="dropzone" data-country="Canada" style="left:19%; top:20%"></div>
      <div class="dropzone" data-country="USA" style="left:23%; top:38%"></div>
      <div class="dropzone" data-country="UK" style="left:51.8%; top:31.5%"></div>
      <div class="dropzone" data-country="Ireland" style="left:50.2%; top:32.3%"></div>
      <div class="dropzone" data-country="South Africa" style="left:53.5%; top:74.5%"></div>
      <div class="dropzone" data-country="Australia" style="left:82.2%; top:78%"></div>
      <div class="dropzone" data-country="New Zealand" style="left:88.8%; top:82.5%"></div>
    </section>
    <aside class="sidebar">
      <section class="panel">
        <div class="row">
          <div class="score">Correct: <span id="score">0</span> / 12</div>
          <div class="legend" title="Legend">
            <span class="dot" style="background:rgba(34,197,94,.65)"></span> correct
            <span class="dot" style="background:rgba(59,130,246,.65)"></span> hint
          </div>
        </div>
        <h2>Cards</h2>
        <div class="bank" id="bank" aria-live="polite"></div>
      </section>
      <section class="panel">
        <h2>Non‚ÄëEnglish</h2>
        <div class="trash-zone" id="trash">Drag here Non-English countries</div>
      </section>
    </aside>
  </main>
  <div class="toast" id="toast" role="status" aria-live="polite"></div>
  <div class="confetti" id="confetti"></div>
  <audio id="clapSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_cfd3f7f0a9.mp3?filename=small-crowd-cheer-6713.mp3"></audio>
  <script>
    const ENGLISH=[{name:'UK',flag:'üá¨üáß'},{name:'USA',flag:'üá∫üá∏'},{name:'Ireland',flag:'üáÆüá™'},{name:'Canada',flag:'üá®üá¶'},{name:'Australia',flag:'üá¶üá∫'},{name:'New Zealand',flag:'üá≥üáø'},{name:'South Africa',flag:'üáøüá¶'}];
    const DISTRACTORS=[{name:'Spain',flag:'üá™üá∏'},{name:'Poland',flag:'üáµüá±'},{name:'Italy',flag:'üáÆüáπ'},{name:'France',flag:'üá´üá∑'},{name:'China',flag:'üá®üá≥'}];
    const ALL=[...ENGLISH,...DISTRACTORS];
    const qs=(s,el=document)=>el.querySelector(s);
    const qsa=(s,el=document)=>[...el.querySelectorAll(s)];
    const toast=(msg)=>{const t=qs('#toast');t.textContent=msg;t.classList.add('show');clearTimeout(window.__toastTimer);window.__toastTimer=setTimeout(()=>t.classList.remove('show'),1200);}
    function playClap(){qs('#clapSound').currentTime=0;qs('#clapSound').play();}
    function launchConfetti(){const c=qs('#confetti');for(let i=0;i<50;i++){const piece=document.createElement('div');piece.style.left=Math.random()*100+'%';piece.style.background=`hsl(${Math.random()*360},100%,70%)`;piece.style.animationDelay=Math.random()*0.5+'s';piece.style.transform=`rotate(${Math.random()*360}deg)`;c.appendChild(piece);setTimeout(()=>piece.remove(),2500);}}
    function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}return a;}
    function makeDraggable(card){let dx=0,dy=0,startX=0,startY=0,dragging=false,originParent=null,originNext=null;const onPointerDown=(e)=>{if(card.classList.contains('lock'))return;dragging=true;card.setPointerCapture(e.pointerId);const r=card.getBoundingClientRect();dx=e.clientX-r.left;dy=e.clientY-r.top;startX=r.left+window.scrollX;startY=r.top+window.scrollY;originParent=card.parentElement;originNext=card.nextSibling;card.style.position='fixed';card.style.left=(e.clientX-dx)+'px';card.style.top=(e.clientY-dy)+'px';card.style.zIndex=99;};const onPointerMove=(e)=>{if(!dragging)return;e.preventDefault();card.style.left=(e.clientX-dx)+'px';card.style.top=(e.clientY-dy)+'px';qsa('.dropzone').forEach(z=>z.classList.toggle('hint',over(e,z)));const trash=qs('#trash');trash.classList.toggle('ok',over(e,trash));};const onPointerUp=(e)=>{if(!dragging)return;dragging=false;card.releasePointerCapture(e.pointerId);const zones=qsa('.dropzone');const hit=zones.find(z=>over(e,z));const overTrash=over(e,qs('#trash'));zones.forEach(z=>z.classList.remove('hint'));qs('#trash').classList.remove('ok');if(hit){const expected=hit.dataset.country;const name=card.dataset.name;if(name===expected){lockToZone(card,hit);updateScore();toast('Great! ‚úÖ');playClap();launchConfetti();}else{snapBack(card);toast('Not there. Try again üôÇ');}}else if(overTrash){if(DISTRACTORS.some(d=>d.name===card.dataset.name)){qs('#trash').appendChild(card);card.style.position='';card.style.left='';card.style.top='';card.classList.add('lock');updateScore();toast('Correct: non‚ÄëEnglish');}else{snapBack(card);toast('This country is English‚Äëspeaking ‚Äî place it on the map!');}}else{snapBack(card);}};card.addEventListener('pointerdown',onPointerDown);window.addEventListener('pointermove',onPointerMove);window.addEventListener('pointerup',onPointerUp);function snapBack(el){el.style.transition='.15s';el.style.left=startX+'px';el.style.top=startY+'px';setTimeout(()=>{el.style.transition='';el.style.position='';el.style.left='';el.style.top='';if(originNext)originParent.insertBefore(el,originNext);else originParent.appendChild(el);el.style.zIndex='';},150);}}
    function over(evt,target){const r=target.getBoundingClientRect();return evt.clientX>=r.left&&evt.clientX<=r.right&&evt.clientY>=r.top&&evt.clientY<=r.bottom;}
    function lockToZone(card,zone){const map=qs('#map');const zr=zone.getBoundingClientRect();const mr=map.getBoundingClientRect();const x=zr.left-mr.left+(zr.width/2);const y=zr.top-mr.top+(zr.height/2);map.appendChild(card);card.style.position='absolute';card.style.left=x+'px';card.style.top=y+'px';card.style.transform='translate(-50%,-50%)';card.style.width=Math.max(zr.width,80)+'px';card.style.textAlign='center';card.classList.add('lock');zone.classList.add('correct');}
    function updateScore(){const placedEnglish=qsa('.card.lock').filter(c=>ENGLISH.some(e=>e.name===c.dataset.name)).length;const placedDistr=qsa('#trash .card.lock').length;const score=placedEnglish+placedDistr;qs('#score').textContent=score;if(score===ALL.length){toast('Perfect! All 12 placed üèÜ');playClap();launchConfetti();}}
    function build(){const bank=qs('#bank');bank.innerHTML='';qsa('#map .card').forEach(c=>c.remove());const shuffled=shuffle(ALL.slice());shuffled.forEach(item=>{const card=document.createElement('div');card.className='card';card.draggable=false;card.dataset.name=item.name;card.setAttribute('role','button');card.innerHTML=`<span class='flag'>${item.flag}</span>${item.name}`;bank.appendChild(card);makeDraggable(card);});qsa('.card').forEach(c=>c.classList.remove('lock'));qsa('.dropzone').forEach(z=>z.classList.remove('correct','hint'));const trash=qs('#trash');trash.innerHTML='Drag here Non-English countries';updateScore();}
    qs('#hintBtn').addEventListener('click',(e)=>{const on=e.currentTarget.getAttribute('aria-pressed')==='true';e.currentTarget.setAttribute('aria-pressed',String(!on));e.currentTarget.textContent=on?'Show hints':'Hide hints';qsa('.dropzone').forEach(z=>z.classList.toggle('hint',!on));});qs('#resetBtn').addEventListener('click',build);build();
  </script>
</body>
</html>
